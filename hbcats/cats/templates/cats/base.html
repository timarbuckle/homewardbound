{% load static %}
<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>{% block title %}Cat Registry{% endblock %}</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <!--
-        <link rel="stylesheet" href="{% static 'cats/css/output.css' %}" />
-        -->

        <script src="https://unpkg.com/htmx.org@1.9.10"></script>
        <style>
            .htmx-indicator { display: none; }
            .htmx-request .htmx-indicator { display: inline; }
            [x-cloak] { display: none !important; }
        </style>
    </head>
    <body class="bg-slate-50 text-slate-900 min-h-screen">
        <nav class="bg-white border-b border-slate-200 py-4 mb-6 shadow-sm print:hidden">
            <div class="max-w-6xl mx-auto px-6">
                <div class="flex justify-between items-center">
                    <div class="flex items-center gap-2">
                        <span class="text-2xl">üêà</span>
                        <span class="font-bold text-xl tracking-tight">
                            HomewardBound Cat Registry
                        </span>
                    </div>

                    <div>
                        <button id="mobile-menu-toggle" class="text-slate-500 hover:text-indigo-600 p-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path id="hamburger-icon" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <div id="mobile-menu" class="hidden mt-4 border-t border-slate-100 pt-4 pb-2 space-y-4">
                    <div class="flex flex-col space-y-2">
                        <a href="/" class="px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:bg-slate-50">Dashboard</a>
                        <a href="{% url 'report' %}" class="px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:bg-slate-50">Report</a>
                        <a href="#" class="px-3 py-2 rounded-md text-base font-medium text-slate-600 hover:bg-slate-50">Settings</a>
                    </div>

                    <div class="border-t border-slate-100 pt-4 flex flex-col gap-2 px-3">
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest px-1">Actions</p>
                        <button hx-post="{% url 'update_stats' %}" hx-target="#stats-display" 
                                class="w-full text-left py-2 px-3 text-sm font-medium text-indigo-600 hover:bg-indigo-50 rounded-md flex items-center">
                            <span class="mr-2">‚Üª</span> Update Stats
                        </button>
                        <button hx-post="{% url 'update_all_cats' %}" hx-target="#stats-display"
                                class="w-full text-left py-2 px-3 text-sm font-medium text-indigo-600 hover:bg-indigo-50 rounded-md flex items-center">
                            <span class="mr-2">‚Üª</span> Update All Info
                        </button>
                        <button hx-post="{% url 'update_cats' %}" hx-target="#stats-display"
                                class="w-full text-left py-2 px-3 text-sm font-medium text-indigo-600 hover:bg-indigo-50 rounded-md flex items-center">
                            <span class="mr-2">‚Üª</span> Update Current
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <main>{% block content %} {% endblock %}</main>

        <script>
            // Toggle logic for the mobile menu
            const menuBtn = document.getElementById('mobile-menu-toggle');
            const menu = document.getElementById('mobile-menu');
            const icon = document.getElementById('hamburger-icon');

            menuBtn.addEventListener('click', () => {
                const isHidden = menu.classList.toggle('hidden');
                // Switch icon between Hamburger and X
                icon.setAttribute('d', isHidden ? 'M4 6h16M4 12h16M4 18h16' : 'M6 18L18 6M6 6l12 12');
            });

            document.body.addEventListener("htmx:configRequest", (event) => {
                event.detail.headers["X-CSRFToken"] = "{{ csrf_token }}";
            });
        </script>
    </body>
</html>